@{
    ViewBag.Title = "Search";
}

<h2>Search</h2>

<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Tag-it! Example</title> 
    <link href="../css/jquery.tagit.css" rel="stylesheet" type="text/css"> 
    <link href="../css/tagit.ui-zendesk.css" rel="stylesheet" type="text/css">  
    <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/flick/jquery-ui.css">     
    <!-- The real deal -->
    <script src="../js/tag-it.js" type="text/javascript" charset="utf-8"></script>
     
    <script>
        $(function(){
            var sampleTags = ['c++', 'java', 'php', 'coldfusion', 'javascript', 'asp', 'ruby', 'python', 'c', 'scala', 'groovy', 'haskell', 'perl', 'erlang', 'apl', 'cobol', 'go', 'lua'];             
            //-------------------------------
            // Tag events
            //-------------------------------
            var eventTags = $('#eventTags'); 
            eventTags.tagit({               
                availableTags: sampleTags,                        
                onTagClicked: function (evt, ui) {
                    var tag_content = eventTags.tagit('tagLabel', ui.tag);
                    call_on_tag_click(tag_content);
                } 
            });

        });                   
    </script>
    <script type="text/javascript">
        $(document).ready(function () {             
            $.ajax({
                url: "../Home/get_all_tags",
                contentType: "application/x-www-form-urlencoded",
                type: "GET",
                datatype: "json",
                error: function (xmlHttpRequest, errorText, thrownError) {
                    alert(xmlHttpRequest + "|" + errorText + "|" + thrownError);
                },
                success: function (data) {
                    if (data != null) {
                        var tags = $.parseJSON(data);                        
                        for (var prop in tags) {                            
                            var abc = (tags[prop]);                                                                                                      
                                      $("#content ul").append(
                                     '<li class=\"tagit-choice ui-widget-content ui-state-default ui-corner-all tagit-choice-editable\">'
                                     + '<a class=\"tagit-label\">' + abc.Tag_Name + '</a><a class=\"tagit-close\">'
                                     + '</span></a><input value=\"' + abc.Tag_Name + '\" name=\"tags\" class=\"tagit-hidden-field\" type=\"hidden\"></li>'
                                  );                            
                        }                     
                    }
                }
            });
        });
    </script>
    <script type="text/javascript">
        function call_on_tag_click(tag_content) {
            $("#show_all_blogs").hide();
            $("#fill_for_tag").load('../Home/All_blog_Partial?tag_content='+tag_content);
        };
    </script>
</head>
<body>    
    <div id="wrapper">       
        <div id="content">             
             
            <h3>List Of Tags</h3>
            <form>
                <p>Click On A Below Mentioned Tag To See Related Articles</p>
                <ul id="eventTags">                     
                </ul>
            </form>            
            <hr>

       </div>
    </div>
    <div id="fill_for_tag"></div>
    <div id="show_all_blogs">
        @using Security
        @model IEnumerable<Blog>
        @{mvc_blog_dbEntities db = new mvc_blog_dbEntities();}         
        @Html.Partial("All_blog_Partial", (db.Blogs.Where(i => i.is_active == true).ToList()))
    </div>
</body>
</html>
